# Generated by Django 3.2.25 on 2024-08-05 08:51

import django.contrib.postgres.indexes
from django.contrib.postgres.operations import AddIndexConcurrently
from django.db import migrations


class Migration(migrations.Migration):
    dependencies = [
        ("account", "0085_address_validation_skipped"),
    ]

    atomic = False

    operations = [
        AddIndexConcurrently(
            model_name="user",
            index=django.contrib.postgres.indexes.GinIndex(
                fields=["first_name"], name="first_name_gin", opclasses=["gin_trgm_ops"]
            ),
        ),
        AddIndexConcurrently(
            model_name="user",
            index=django.contrib.postgres.indexes.GinIndex(
                fields=["last_name"], name="last_name_gin", opclasses=["gin_trgm_ops"]
            ),
        ),
        migrations.RunSQL(
            sql="""
            CREATE INDEX CONCURRENTLY idx_user_full_name ON account_user USING gin ((first_name || ' ' || last_name) gin_trgm_ops);
            """,
            reverse_sql="""DROP INDEX CONCURRENTLY idx_user_full_name;""",
        ),
    ]
