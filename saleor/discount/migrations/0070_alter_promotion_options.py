# Generated by Django 3.2.23 on 2023-11-24 12:18

from django.db import migrations


def rename_discount_permission(apps, schema_editor):
    Promotion = apps.get_model("discount", "Promotion")
    ContentType = apps.get_model("contenttypes", "ContentType")
    Permission = apps.get_model("permission", "Permission")

    content_type = ContentType.objects.get_for_model(Promotion)
    Permission.objects.filter(
        content_type=content_type, codename="manage_discounts"
    ).update(name="Manage promotions and vouchers.")


class Migration(migrations.Migration):
    dependencies = [
        ("discount", "0069_merge_20231117_0959"),
    ]

    operations = [
        migrations.AlterModelOptions(
            name="promotion",
            options={
                "ordering": ("name", "pk"),
                "permissions": (
                    ("manage_discounts", "Manage promotions and vouchers."),
                ),
            },
        ),
        migrations.RunPython(rename_discount_permission, migrations.RunPython.noop),
    ]
